# Schema for manufacturing VBIEDs
- schema_id: "cmu:make-vbied-manufactureExpl"
  schema_name: "VBIED Manufacture (explosives manufactured)"
  schema_dscpt: "Description of making vehicle-based IED, when explosives are manufactured"
  steps:
  - id: obtain-vbied-plans
    primitive: 'Transaction.ExchangeBuySell'
    provenance: 
      - VBIED1-sent19
      - VBIED1-sent20
    slots:
      - role: AcquirerOrRecipient
        refvar: attacker
        constraints: ['PER', 'ORG', 'SID']
      - role: AcquiredEntity
        constraints: ['INF']
        refvar: plans
        reference: Q1371819 # plan
  - id: manufacture-explosives
    primitive: ArtifactExistence.ManufactureAssemble
    provenance:
      - VBIED1-sent22
      - VBIED1-sent23
      - VBIED1-sent24
    slots:
      - role: Agent
        refvar: attacker
        constraints: ['PER', 'ORG', 'SID']
      - role: Instrument
        refvar: plans
        constraints: ['ABS']
      - role: Result
        refvar: explosives
        constraints: ['WEA']
        reference: Q12870 # explosive material     
  - id: obtain-vehicle
    primitive: 'Transaction.ExchangeBuySell'
    slots:
      - role: AcquirerOrRecipient
        refvar: attacker
        constraints: ['PER', 'ORG', 'SID']
      - role: AcquiredEntity
        refvar: vehicle
        constraints: ['VEH']
        reference: Q42889
  - id: manufacture-vbied
    primitive: ArtifactExistence.ManufactureAssemble
    provenance:
      - VBIED1-sent28
      - VBIED1-sent29
    slots:
      - role: Agent
        refvar: attacker
        constraints: ['PER', 'ORG', 'SID']
      - role: Components
        refvar: vehicle
        constraints: ['VEH']
      - role: Components
        refvar: explosives
        constraints: ['COM']
      - role: Instrument
        constraints: ['ABS']
        refvar: plan
      - role: Result
        constraints: ['WEA']
        reference: Q11244 # car bomb
  order:
  - before: obtain-vbied-plans
    after: manufacture-explosives
  - before: manufacture-explosives
    after: manufacture-vbied
  - before: obtain-vehicle
    after: manufacture-vbied
