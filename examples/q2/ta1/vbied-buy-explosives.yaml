# Schema for manufacturing VBIEDs
- schema_id: "cmu:make-vbied-purchaseExpl"
  schema_name: "VBIED Manufacture (explosives purchased)"
  schema_dscpt: "Description of making vehicle-based IED, when explosives are purchased"
  steps:
  - id: obtain-vbied-plans
    primitive: 'Transaction.ExchangeBuySell'
    provenance: 
      - VBIED1-sent19
      - VBIED1-sent20
    slots:
      - role: Recipient
        refvar: attacker
        constraints: ['PER', 'ORG', 'SID']
      - role: AcquiredEntity
        constraints: ['INF']
        refvar: plans
        reference: Q1371819 # plan
  - id: obtain-explosives
    primitive: 'Transaction.ExchangeBuySell'
    slots:
      - role: Recipient
        refvar: attacker
        constraints: ['PER', 'ORG', 'SID']
      - role: AcquiredEntity
        refvar: explosives
        constraints: ['COM']
        reference: Q12870 # explosive material
  - id: obtain-vehicle
    primitive: 'Transaction.ExchangeBuySell'
    slots:
      - role: Recipient
        refvar: attacker
        constraints: ['PER', 'ORG', 'SID']
      - role: AcquiredEntity
        refvar: vehicle
        constraints: ['VEH']
        reference: Q42889
  - id: manufacture-vbied
    primitive: ArtifactExistence.ManufactureAssemble
    provenance:
      - VBIED1-sent28
      - VBIED1-sent29
    slots:
      - role: ManufacturerAssembler
        refvar: attacker
        constraints: ['PER', 'ORG', 'SID']
      - role: Components
        refvar: vehicle
        constraints: ['VEH']
      - role: Components
        refvar: explosives
        constraints: ['COM']
      - role: Instrument
        constraints: ['ABS']
        refvar: plan
      - role: Artifact
        constraints: ['WEA']
        reference: Q11244 # car bomb
  order:
  - before: obtain-vbied-plans
    after: manufacture-vbied
  - before: obtain-explosives
    after: manufacture-vbied
  - before: obtain-vehicle
    after: manufacture-vbied
